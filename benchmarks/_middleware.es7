'use strict'

const Ellipse = require('..'),
      body    = Buffer.from('Hello World'),
      app     = new Ellipse({ etag: false })

var num = parseInt(process.env.MW || '1', 10)

console.log('  %s middleware', num)

while (num--)
    app.use(async (ctx, next) => await next())

app.use(async ctx => ctx.send(body))
   .listen(3333)
